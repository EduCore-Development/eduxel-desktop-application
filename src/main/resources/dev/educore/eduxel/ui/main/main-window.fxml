<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane fx:id="root"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="dev.educore.eduxel.ui.main.MainWindowController"
            stylesheets="@main-theme.css"
            styleClass="root-pane">

    <top>
        <HBox spacing="16" styleClass="top-bar">
            <HBox spacing="16" alignment="CENTER_LEFT">
                <StackPane styleClass="app-avatar">
                    <Label text="E" styleClass="app-avatar-text"/>
                </StackPane>
                <VBox spacing="2">
                    <Label fx:id="titleLabel" styleClass="app-title"/>
                    <Label fx:id="versionLabel" styleClass="app-version"/>
                </VBox>
            </HBox>

            <Pane HBox.hgrow="ALWAYS"/>

            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Label text="Eduxel Schulmanagement" styleClass="app-subtitle"/>
                <Button text="Demo-Session" styleClass="pill-button"/>
            </HBox>
        </HBox>
    </top>

    <left>
        <VBox spacing="12" styleClass="side-bar">
            <BorderPane.margin>
                <Insets top="24.0" right="0.0" bottom="0.0" left="0.0"/>
            </BorderPane.margin>

            <Label text="Bereiche" styleClass="side-title"/>

            <VBox fx:id="navSchoolButton"
                  onMouseClicked="#onNavSchoolClicked"
                  styleClass="nav-item nav-item-selected">
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="nav-inner">
                    <StackPane styleClass="nav-icon-wrapper">
                        <Label text="ðŸ“š" styleClass="nav-icon-label"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="Schuldatenbank" styleClass="nav-label"/>
                        <Label text="SchÃ¼ler, Klassen, Lehrer" styleClass="nav-caption"/>
                    </VBox>
                </HBox>
            </VBox>

            <VBox fx:id="navInventoryButton"
                  onMouseClicked="#onNavInventoryClicked"
                  styleClass="nav-item nav-item-inventory">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ’»" styleClass="nav-icon-label"/>
                    <VBox spacing="2">
                        <Label text="Inventar" styleClass="nav-label"/>
                        <Label text="GerÃ¤te, Zuweisungen" styleClass="nav-caption"/>
                    </VBox>
                </HBox>
            </VBox>

            <VBox fx:id="navSettingsButton"
                  onMouseClicked="#onNavSettingsClicked"
                  styleClass="nav-item nav-item-secondary">
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="nav-inner">
                    <StackPane styleClass="nav-icon-wrapper">
                        <Label text="âš™" styleClass="nav-icon-label"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="Einstellungen" styleClass="nav-label"/>
                        <Label text="System &amp; Layout" styleClass="nav-caption"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Spacer pushes quick actions to the red area at the bottom -->
            <Pane VBox.vgrow="ALWAYS"/>

            <!-- Quick actions -->
            <VBox spacing="8" styleClass="quick-actions">
                <Label text="Schnellzugriffe" styleClass="side-title"/>

                <Hyperlink text="Neuen SchÃ¼ler anlegen"
                           styleClass="quick-action"
                           onAction="#onQuickCreateStudent"/>

                <Hyperlink text="GerÃ¤t zuweisen"
                           styleClass="quick-action"
                           onAction="#onQuickAssignDevice"/>

                <Hyperlink text="KlassenÃ¼bersicht Ã¶ffnen"
                           styleClass="quick-action"
                           onAction="#onQuickOpenClasses"/>
            </VBox>

            <Label text="EduCore Development"
                   styleClass="side-footer"/>
        </VBox>
    </left>

    <center>
        <VBox styleClass="content-area" spacing="18">
            <BorderPane.margin>
                <Insets top="24.0" right="0.0" bottom="0.0" left="0.0"/>
            </BorderPane.margin>

            <!-- Make the activity table take the full width and grow vertically -->
            <VBox spacing="10" styleClass="activity-card" VBox.vgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label text="Letzte AktivitÃ¤ten" styleClass="activity-title"/>
                    <Label text="Live aus der Schuldatenbank und Inventar"
                           styleClass="activity-subtitle"/>
                </HBox>

                <!-- Make columns resize with the window: use constrained resize policy -->
                <TableView fx:id="activityTable" VBox.vgrow="ALWAYS">
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                    <columns>
                        <!-- Use computed sizes so the constrained policy can distribute width dynamically -->
                        <TableColumn text="Zeit" prefWidth="-1.0" minWidth="100.0"/>
                        <TableColumn text="Bereich" prefWidth="-1.0" minWidth="100.0"/>
                        <TableColumn text="Aktion" prefWidth="-1.0" minWidth="150.0"/>
                        <TableColumn text="Benutzer" prefWidth="-1.0" minWidth="100.0"/>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

</BorderPane>
